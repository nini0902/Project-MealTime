# Product Requirements Document (PRD)
# 家庭食材配對食譜系統

## 版本資訊
- **版本**: 1.1
- **最後更新**: 2025-10-27
- **狀態**: 規劃階段 (Plan Mode)
- **更新內容**: 詳細化功能描述、完善使用案例、補充驗收標準
- **備註**: 本版本已優化為詳細規格文件，準備進入技術選型階段

---

## 1. 產品概述

### 1.1 產品願景
打造一個智能食譜推薦系統，幫助在家做飯的人快速找到適合的食譜，減少思考三餐的時間成本。

### 1.2 目標客群
- **主要客群**: 經常在家自己做飯的人
- **使用場景**: 每日規劃三餐時
- **痛點**: 需要花費大量時間思考要煮什麼菜

### 1.3 核心價值主張
根據家中現有食材，快速匹配可製作的食譜，大幅減少規劃時間。

---

## 2. 核心功能需求

### 2.1 食材選擇功能
**優先級**: P0 (Must Have)

**功能描述**:
- 使用者可以從食材庫中選擇家裡現有的食材
- 支援多選功能
- 食材應分類顯示（例如：蔬菜類、肉類、調味料等）
- 支援快速清除所有選擇

**食材分類**:
| 分類 | 示例 |
|------|------|
| 蔬菜 | 番茄、洋蔥、胡蘿蔔、青花菜、高麗菜 |
| 肉類 | 雞肉、豬肉、牛肉、羊肉 |
| 海鮮 | 蝦、魚、貝類、鮮蚵 |
| 蛋類 | 雞蛋 |
| 乳製品 | 牛奶、起司、優格 |
| 調味料 | 醬油、鹽、糖、油、辣椒 |
| 乾貨 | 米、麵條、豆類 |

**使用案例**:
1. 使用者進入系統 → 點擊「選擇食材」
2. 系統顯示按分類組織的食材清單
3. 使用者逐一點選家中現有的食材
4. 使用者點擊「搜尋食譜」或「清除所有」

**驗收標準**:
- [ ] 能顯示完整的食材清單（至少 50 項食材）
- [ ] 食材按分類組織，分類不少於 7 種
- [ ] 支援多選/取消選擇食材
- [ ] 選擇的食材能被系統記錄
- [ ] 提供「清除所有」快速操作
- [ ] 頁面能清楚顯示已選擇的食材數量

### 2.2 食譜匹配與推薦
**優先級**: P0 (Must Have)

**功能描述**:
- 系統根據選擇的食材，推薦可製作的食譜
- 優先推薦能完全匹配食材的食譜
- 顯示每個食譜所需的食材清單
- 清楚提示缺少哪些食材

**匹配邏輯**:
1. **完全匹配** (100%): 使用者擁有食譜所需的 **所有食材**
   - 例子: 使用者選了[雞肉, 洋蔥, 醬油, 油] → 找到「簡易炒雞肉」(需要: 雞肉, 洋蔥, 醬油, 油, 鹽)
   - 注意: 鹽是常見調味料，可視為隱含食材

2. **部分匹配** (50-99%): 使用者擁有大部分食材（設定閾值 80%）
   - 例子: 使用者選了[番茄, 洋蔥, 雞蛋] → 找到「番茄蛋湯」(需要: 番茄, 洋蔥, 雞蛋, 清水)

3. **可製作食譜**: 匹配度 ≥ 50% 的食譜才推薦

**匹配公式**:
```
匹配度 = (擁有的食材數 / 所需食材總數) × 100%
```

**使用案例**:
1. 使用者選擇 [雞肉, 洋蔥, 番茄, 雞蛋]
2. 系統返回食譜列表，按匹配度排序:
   - 第 1 名: 番茄炒雞蛋 (100%) - 擁有所有食材
   - 第 2 名: 番茄雞湯 (80%) - 缺少清水但視為常見
   - 第 3 名: 蔥爆雞肉 (75%) - 缺少醬油

**驗收標準**:
- [ ] 能根據選擇的食材返回食譜列表
- [ ] 食譜按匹配度 (高→低) 排序
- [ ] 完全匹配的食譜標示特殊標記（如「✓ 可完全製作」）
- [ ] 顯示每個食譜的匹配率百分比
- [ ] 列出缺少的食材（如有）
- [ ] 若無匹配食譜，給出友善的提示信息

### 2.3 食譜詳細資訊
**優先級**: P0 (Must Have)

**功能描述**:
- 使用者點選食譜後，顯示完整的烹飪資訊
- 清晰的步驟說明，易於跟隨
- 清楚列出食材用量

**必要資訊**:
| 欄位 | 說明 | 例子 |
|------|------|------|
| 食譜名稱 | 清晰的中文名稱 | 番茄炒雞蛋 |
| 難度等級 | 簡單/中等/困難 | 簡單 |
| 烹飪時間 | 預計分鐘數 | 15 分鐘 |
| 份量 | 幾人份 | 2 人份 |
| 食材清單 | 完整的食材+用量 | 雞蛋 3 個、番茄 2 顆、油 2 湯匙 |
| 烹飪步驟 | 逐步說明 | 1. 雞蛋打散... 2. 番茄切塊... 3. 熱鍋下油... |
| 小貼士 | 烹飪技巧（可選） | 蛋要炒至半熟再加番茄 |

**使用案例**:
1. 使用者在列表中看到「番茄炒雞蛋 (100%)」
2. 點擊後進入詳細頁面
3. 看到完整的食材清單和逐步烹飪指示
4. 可返回列表選擇其他食譜

**驗收標準**:
- [ ] 能查看單一食譜的完整資訊
- [ ] 食材清單清晰顯示（名稱 + 用量 + 單位）
- [ ] 烹飪步驟編號清楚，易於跟隨
- [ ] 顯示烹飪時間和難度等級
- [ ] 頁面版面整潔易讀
- [ ] 提供返回列表的操作按鈕

### 2.4 食譜資料庫管理
**優先級**: P0 (Must Have)

**功能描述**:
- 建立可擴充的食譜資料庫
- 支援新增、編輯、刪除食譜
- 食譜資料持久化儲存
- **支援隨時擴充**：可輕易添加新食譜

**資料結構**:

#### 食譜 (Recipe) 物件
```json
{
  "id": "recipe_001",
  "name": "番茄炒雞蛋",
  "category": "中式/快炒",
  "difficulty": "簡單",
  "cookingTime": 15,
  "servings": 2,
  "ingredients": [
    {
      "ingredientId": "ing_egg",
      "name": "雞蛋",
      "amount": 3,
      "unit": "個"
    },
    {
      "ingredientId": "ing_tomato",
      "name": "番茄",
      "amount": 2,
      "unit": "顆"
    },
    {
      "ingredientId": "ing_oil",
      "name": "食用油",
      "amount": 2,
      "unit": "湯匙"
    }
  ],
  "steps": [
    "將雞蛋打入碗中，加鹽打散",
    "番茄洗淨切成塊狀",
    "熱鍋下油，待油熱後倒入雞蛋液...",
    "...（逐步列舉）"
  ],
  "tips": "蛋要炒至半熟再加番茄，保持蛋的鬆軟口感",
  "createdAt": "2025-10-27",
  "updatedAt": "2025-10-27"
}
```

#### 食材 (Ingredient) 物件
```json
{
  "id": "ing_tomato",
  "name": "番茄",
  "category": "蔬菜",
  "aliases": ["西紅柿", "蕃茄"],
  "defaultUnit": "顆"
}
```

**CRUD 操作**:
- **Create**: 新增食譜 `addRecipe(recipeData)`
- **Read**: 查詢食譜 `getRecipe(id)` 或 `getAllRecipes()`
- **Update**: 編輯食譜 `updateRecipe(id, updatedData)`
- **Delete**: 刪除食譜 `deleteRecipe(id)`

**驗收標準**:
- [ ] 能新增食譜到資料庫
- [ ] 能編輯現有食譜
- [ ] 能刪除食譜
- [ ] 資料能持久化儲存（不會因關閉應用而丟失）
- [ ] 資料庫結構支援未來擴充（至少 1000+ 筆食譜）
- [ ] 食材資料能與食譜關聯
- [ ] 支援食材別名查詢（如「西紅柿」能匹配「番茄」）

### 2.5 食譜管理功能 (前端新增/編輯/刪除)
**優先級**: P0 (Must Have)

**功能描述**:
- 使用者可以透過**前端網站**新增自訂食譜
- 支援編輯現有的自訂食譜
- 支援刪除不需要的食譜
- 區分系統預設食譜 (唯讀) 和使用者食譜 (可編輯/刪除)

**食譜來源管理**:
| 食譜類型 | 來源 | 操作 | 說明 |
|---------|------|------|------|
| 系統預設食譜 | built-in | 只讀 | 系統提供的參考食譜，無法修改 |
| 使用者自訂食譜 | user | CRUD | 使用者新增的個人食譜，可完全控制 |

**新增食譜流程**:
1. 使用者點擊「新增食譜」按鈕
2. 進入食譜編輯表單
3. 填寫食譜資訊:
   - 食譜名稱 (必填)
   - 分類 (必選，如：中式/西式/湯品等)
   - 難度等級 (必選：簡單/中等/困難)
   - 烹飪時間 (必填，分鐘)
   - 份量 (必填，人份)
4. 新增食材清單:
   - 選擇食材或輸入新食材
   - 輸入用量和單位
   - 可多次新增食材
5. 新增烹飪步驟:
   - 逐步輸入烹飪指示
   - 可新增多個步驟
   - 支援刪除單個步驟
6. 新增小貼士 (可選)
7. 提交保存 ✅

**編輯食譜流程**:
1. 在食譜詳細頁面點擊「編輯」按鈕
2. 進入編輯模式 (同新增表單)
3. 修改食譜資訊
4. 保存更改

**刪除食譜流程**:
1. 在食譜詳細頁面點擊「刪除」按鈕
2. 出現確認對話框 (「確定要刪除此食譜嗎？」)
3. 確認後刪除食譜

**前端表單驗證**:
- ✅ 食譜名稱: 非空、長度 3-100 字元
- ✅ 食材清單: 至少 1 個食材
- ✅ 烹飪步驟: 至少 1 個步驟
- ✅ 用量: 必須是正數
- ✅ 烹飪時間: 必須是正數 (1-999 分鐘)
- ✅ 份量: 必須是正數 (1-20 人份)

**資料相容性**:
- 新增的食譜使用**相同的資料結構**
- 與系統預設食譜相同的匹配演算法適用
- 新增的食譜立即可用於匹配搜尋

**使用案例**:
```
案例 1: 新增家傳食譜
1. 使用者點擊「新增食譜」
2. 填寫「我家的紅油汆白肉」
3. 新增食材: 豬肉 200g、豆芽 100g、醬油 2 湯匙等
4. 新增步驟: 煮豬肉、過冰水、擺盤、淋紅油等
5. 保存後，立即可在匹配搜尋中使用

案例 2: 編輯已有食譜
1. 查看某個自訂食譜的詳細頁面
2. 發現份量需要改成 4 人份
3. 點擊編輯，修改份量
4. 保存即可
```

**驗收標準**:
- [ ] 能透過前端表單新增食譜
- [ ] 新增的食譜能立即在搜尋結果中出現
- [ ] 能編輯已新增的食譜
- [ ] 能刪除已新增的食譜 (有確認提示)
- [ ] 系統預設食譜標示為唯讀 (無法編輯/刪除)
- [ ] 表單有完整的驗證提示
- [ ] 新增的食譜與系統食譜無視覺差異
- [ ] 食材清單同步到全局食材庫 (新食材自動添加)

---

## 3. 進階功能需求（未來版本）

### 3.1 食材庫管理
**優先級**: P1 (Should Have)
- 新增、編輯、刪除食材
- 食材分類管理
- 食材別名/同義詞處理

### 3.2 個人化功能
**優先級**: P2 (Nice to Have)
- 收藏喜愛的食譜
- 記錄常用食材
- 飲食偏好設定（如：素食、低碳等）
- 過敏原標示與過濾

### 3.3 智能推薦
**優先級**: P2 (Nice to Have)
- 根據使用歷史推薦
- 季節性食材推薦
- 營養均衡建議

### 3.4 搜尋與篩選
**優先級**: P1 (Should Have)
- 關鍵字搜尋食譜
- 按分類篩選
- 按烹飪時間篩選
- 按難度篩選

---

## 4. 技術需求

### 4.1 開發方法論
- **開發方式**: Test-Driven Development (TDD)
- **測試優先**: 所有功能開發前先寫測試
- **持續整合**: 確保測試通過後才提交程式碼

### 4.2 技術架構（待定）
需要確定的技術選型：
- [ ] 前端框架（React / Vue / Angular / 原生 HTML/JS）
- [ ] 後端語言（Node.js / Python / Java / C#）
- [ ] 資料庫（SQL / NoSQL）
- [ ] 部署方式（Web App / Desktop App / Mobile App）

### 4.3 資料庫設計原則
- 支援擴展性
- 正規化設計
- 高效查詢效能
- 資料完整性約束

---

## 5. 使用者體驗

### 5.1 核心使用流程
1. **進入系統** → 看到食材選擇介面
2. **選擇食材** → 使用者勾選家中現有的食材（如：雞蛋、番茄、洋蔥）
3. **觸發搜尋** → 點擊「搜尋食譜」或「推薦食譜」按鈕
4. **檢視結果** → 系統顯示匹配的食譜列表（按匹配度排序）
   - 完全匹配食譜顯示在上方
   - 部分匹配食譜顯示在下方
   - 每個食譜顯示匹配率、缺少食材數量
5. **檢視詳細資訊** → 使用者點選感興趣的食譜
6. **查看烹飪指南** → 查看詳細的食材清單和烹飪步驟
7. **開始料理** → 根據指南進行烹飪
8. **返回搜尋** → 返回列表選擇其他食譜（或重新選擇食材）

**時間目標**: 從進入系統到找到食譜應在 **2 分鐘內完成**

### 5.2 介面設計原則
- **簡潔直觀**: 按鈕、選項清晰，不超過 3 層深度的導航
- **操作最小化**: 從開啟到得到結果最多 3 個操作步驟
- **視覺回饋**: 
  - 已選食材有明確標記（勾選、顏色等）
  - 操作按鈕有按壓回饋
  - 搜尋過程顯示加載指示
- **響應式設計**: 支援桌面、平板、手機等各種螢幕尺寸
- **色彩運用**: 
  - 綠色: 完全匹配、確認操作
  - 黃色: 部分匹配、警告信息
  - 紅色: 錯誤、危險操作（如刪除）
- **字型可讀性**: 中文字體最小 14px，清晰易讀

---

## 6. 成功指標

### 6.1 關鍵指標 (KPI)
| 指標 | 目標 | 說明 |
|------|------|------|
| 響應時間 | < 1 秒 | 從點擊搜尋到顯示結果 |
| 使用時間 | < 2 分鐘 | 從進入系統到找到食譜 |
| 匹配成功率 | > 80% | 至少能推薦 3 個以上匹配食譜的場景比例 |
| 使用者滿意度 | > 85% | 使用者找到想要食譜的成功率 |
| 資料準確率 | 100% | 推薦的食譜能確實用選定的食材製作 |
| 系統可用率 | > 99.5% | 系統正常運行時間比例 |

### 6.2 品質指標
| 指標 | 目標 | 說明 |
|------|------|------|
| 測試覆蓋率 | > 80% | 核心邏輯 100%、一般邏輯 80%+ |
| Bug 密度 | < 5 per KLOC | 每千行程式碼的 Bug 數量 |
| 程式碼可讀性 | 易於維護 | 遵循命名規範、有清晰註解 |
| 文件完整度 | 100% | 所有公開 API 都有文件說明 |

---

## 7. MVP (Minimum Viable Product) 範圍

### Phase 1 - 核心功能 (當前階段) ⭐
- [ ] 食材選擇介面
- [ ] 基礎食譜資料庫（至少 50 個食譜）
  - [ ] 系統預設食譜 (built-in，唯讀)
  - [ ] 使用者自訂食譜 (user，可編輯/刪除)
- [ ] 食譜匹配演算法
- [ ] 食譜詳細資訊顯示
- [ ] **前端食譜管理功能** (新增/編輯/刪除)
  - [ ] 新增食譜表單
  - [ ] 編輯食譜功能
  - [ ] 刪除食譜功能
  - [ ] 表單驗證
- [ ] 完整的單元測試覆蓋 (> 80%)

### Phase 2 - 進階功能
- [ ] 搜尋與篩選功能
- [ ] 食材管理功能
- [ ] 資料匯入/匯出

### Phase 3 - 使用者體驗優化
- [ ] 個人化設定
- [ ] 收藏功能
- [ ] UI/UX 優化

---

## 8. 風險與限制

### 8.1 已知風險
- **食譜資料來源**: 需要提供初期的系統預設食譜 (至少 50 筆)
- **食材標準化**: 食材名稱需要標準化處理（如：番茄 vs 西紅柿）
- **匹配準確性**: 確保推薦的食譜真的可以用選擇的食材製作
- **前端表單驗證**: 需要完善的表單驗證，防止無效食譜資料

### 8.2 限制條件
- MVP 階段不考慮使用者帳號系統 (所有食譜共享)
- 暫不支援圖片上傳
- 暫不支援食譜版本管理
- 初期不支援批量匯入食譜

---

## 9. 時程規劃（預估）

| 階段 | 工作內容 | 預估時間 |
|------|---------|---------|
| 規劃階段 | PRD 撰寫、技術選型 | 當前 |
| 設計階段 | 資料庫設計、API 設計 | 待定 |
| 開發階段 - Phase 1 | 核心功能開發 | 待定 |
| 測試階段 | 整合測試、使用者測試 | 待定 |
| 上線階段 | 部署與維護 | 待定 |

---

## 10. 附錄

### 10.1 專案文件
- **AGENTS.md**: 專案進度追蹤與 AI 協作文件
- **技術文件**: 待建立
- **測試文件**: 待建立

### 10.2 相關資源
- 食譜參考網站: 待補充
- 競品分析: 待補充

---

## 變更歷史

| 日期 | 版本 | 變更內容 | 變更人 |
|------|------|---------|--------|
| 2025-10-27 | 1.0 | 初始版本建立 | GitHub Copilot |
| 2025-10-27 | 1.1 | 詳細化功能描述、食材分類列表、匹配公式、使用案例、介面原則、KPI 表格 | GitHub Copilot |

